/**
* Generated by Kubb (https://kubb.dev/).
* Do not edit manually.
*/

import fetch from "../../algod-query-client";
import type { RequestConfig, ResponseErrorConfig } from "../../algod-query-client";
import type { TealCompileMutationRequest, TealCompileMutationResponse, TealCompileQueryParams, TealCompile400, TealCompile401, TealCompile404, TealCompile500 } from "../types/TealCompile.ts";
import type { UseMutationOptions, QueryClient } from "@tanstack/react-query";
import { tealCompileMutationResponseSchema, tealCompileMutationRequestSchema } from "../zod/tealCompileSchema.ts";
import { useMutation } from "@tanstack/react-query";

export const tealCompileMutationKey = () => [{ url: '/v2/teal/compile' }] as const

export type TealCompileMutationKey = ReturnType<typeof tealCompileMutationKey>

/**
 * @description Given TEAL source code in plain text, return base64 encoded program bytes and base32 SHA512_256 hash of program bytes (Address style). This endpoint is only enabled when a node's configuration file sets EnableDeveloperAPI to true.
 * @summary Compile TEAL source code to binary, produce its hash
 * {@link /v2/teal/compile}
 */
export async function tealCompile({ data, params }: { data?: TealCompileMutationRequest; params?: TealCompileQueryParams }, config: Partial<RequestConfig<TealCompileMutationRequest>> & { client?: typeof fetch } = {}) {
  const { client: request = fetch, ...requestConfig } = config  
  
  const requestData = tealCompileMutationRequestSchema.parse(data)  
  
  const res = await request<TealCompileMutationResponse, ResponseErrorConfig<TealCompile400 | TealCompile401 | TealCompile404 | TealCompile500>, TealCompileMutationRequest>({ method : "POST", url : `/v2/teal/compile`, params, data : requestData, ... requestConfig, headers : { 'Content-Type': 'text/plain', ...requestConfig.headers } })  
  return tealCompileMutationResponseSchema.parse(res.data)
}

/**
 * @description Given TEAL source code in plain text, return base64 encoded program bytes and base32 SHA512_256 hash of program bytes (Address style). This endpoint is only enabled when a node's configuration file sets EnableDeveloperAPI to true.
 * @summary Compile TEAL source code to binary, produce its hash
 * {@link /v2/teal/compile}
 */
export function useTealCompile<TContext>(options: 
{
  mutation?: UseMutationOptions<TealCompileMutationResponse, ResponseErrorConfig<TealCompile400 | TealCompile401 | TealCompile404 | TealCompile500>, {data?: TealCompileMutationRequest, params?: TealCompileQueryParams}, TContext> & { client?: QueryClient },
  client?: Partial<RequestConfig<TealCompileMutationRequest>> & { client?: typeof fetch },
}
 = {}) {
  const { mutation = {}, client: config = {} } = options ?? {}
  const { client: queryClient, ...mutationOptions } = mutation;
  const mutationKey = mutationOptions.mutationKey ?? tealCompileMutationKey()

  return useMutation<TealCompileMutationResponse, ResponseErrorConfig<TealCompile400 | TealCompile401 | TealCompile404 | TealCompile500>, {data?: TealCompileMutationRequest, params?: TealCompileQueryParams}, TContext>({
    mutationFn: async({ data, params }) => {
      return tealCompile({ data, params }, config)
    },
    mutationKey,
    ...mutationOptions
  }, queryClient)
}