name: QA Build

on:
# TODO: Re-enable this when we're ready to automate QA builds
#   push:
#     branches:
#       - main
  workflow_dispatch:

jobs:
  ios-staging:
    name: iOS Staging (QA)
    uses: ./.github/workflows/reusable-ios.yml
    with:
      environment: staging
      scheme: Pera-Staging
      notification_title_prefix: "QA Build"
      use_cache: true
    secrets: inherit

  # ios-production:
  #   name: iOS Production (QA)
  #   uses: ./.github/workflows/reusable-ios.yml
  #   with:
  #     environment: production
  #     scheme: Pera-Production
  #     notification_title_prefix: "QA Build"
  #     use_cache: true
  #   secrets: inherit

  android-staging:
    name: Android Staging (QA)
    uses: ./.github/workflows/reusable-android.yml
    with:
      environment: staging
      flavor: staging
      notification_title_prefix: "QA Build"
      use_cache: true
    secrets: inherit

  # android-production:
  #   name: Android Production (QA)
  #   uses: ./.github/workflows/reusable-android.yml
  #   with:
  #     environment: production
  #     flavor: production
  #     notification_title_prefix: "QA Build"
  #     use_cache: true
  #   secrets: inherit
